[phases.setup]
nixPkgs = [
    "python311", 
    "glib", 
    "nss", 
    "nspr", 
    "atk", 
    "at-spi2-atk", 
    "libdrm", 
    "libxkbcommon", 
    "xorg.libXcomposite", 
    "xorg.libXdamage", 
    "xorg.libXfixes", 
    "xorg.libXrandr", 
    "mesa", 
    "alsa-lib", 
    "pango", 
    "cairo",
    "cups",
    "dbus"
]

[phases.install]
cmds = [
    "python -m venv .venv", 
    ". .venv/bin/activate", 
    "pip install -r requirements.txt",
    "playwright install chromium"
]

[start]
cmd = ". .venv/bin/activate && uvicorn main:app --host 0.0.0.0 --port $PORT"
